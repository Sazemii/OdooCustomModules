<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    
    <t t-name="point_of_sale.OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
        <!-- Replaced the entire receipt content to match the template -->
        <xpath expr="//div[@class='pos-receipt p-2']" position="replace">
            <div class="pos-receipt" style="padding: 0px; margin: 0px; position: relative; width: 100%;">
                <!-- Header Section -->
                <div class="pos-receipt-center-align">
                    <div style="font-weight: bold; font-size: 14px;"><t t-esc="props.data.headerData.company.name"/></div>
                    <div style="font-size: 9px;">
                        MIN NO.: <t t-esc="props.data.headerData.company.vat or 'MIN000000012'"/>
                    </div>
                    <div style="font-size: 9px;">
                        SERIAL NO.: <t t-esc="props.data.headerData.company.company_registry or 'SN000000013'"/>
                    </div>
                    <div style="font-size: 10px"> 
                        Digima v1.0 Test 
                    </div>
                    <div style="font-weight: bold; font-size: 14px;">** SALES INVOICE **</div>
                    <div style="font-size: 14px; font-weight: bold">
                        SI #: <t t-esc="props.data.name"/>
                    </div>
                    <div style="font-size: 14x;">** REPRINT **</div>
                </div>
                <div style="border-top: 0.5px solid #000; margin: 7px 0; height: 0; transform: scaleY(0.5);"></div>

                <!-- Transaction Details -->
                <div style="font-size: 12px;">
                    Transaction #: <t t-esc="props.data.name"/>
                    <br/>
                    Date: <t t-esc="props.data.date"/>
                    <br/>
                    SI Print: 2
                </div>
                <div style="border-top: 0.5px solid #000; margin: 7px 0; height: 0; transform: scaleY(0.5);"></div>


                <!-- Order Lines -->
                <div t-foreach="props.data.orderlines" t-as="line" t-key="line_index">
                    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 2px;">
                        <div style="font-size: 13px;flex: 1; text-transform: uppercase">
                            <t t-esc="line.productName"/>
                            <t t-if="line.qty != '1'">
                                <br/>
                                <span style="margin-left: 10px;"><t t-esc="line.qty"/> x <t t-esc="line.unitPrice"/></span>
                            </t>
                        </div>
                        <div style="text-align: right; min-width: 60px;">
                            <t t-esc="line.price"/>
                        </div>
                    </div>
                </div>

                <div style="border-top: 0.5px solid #000; margin: 7px 0; height: 0; transform: scaleY(0.5);"></div>

                <!-- Subtotal -->
                <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px;">
                    <span>Subtotal:</span>
                    <span><t t-esc="props.formatCurrency(props.data.taxTotals.base_amount_currency)"/></span>
                </div>

                <!-- VAT Details -->
                <t t-set="totalAmount" t-value="props.data.taxTotals.order_total"/>
                <t t-set="vatAmount" t-value="totalAmount * 0.12 / 1.12"/>
                <t t-set="netAmount" t-value="totalAmount - vatAmount"/>
                
                <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px;">
                    <span>Price Net of VAT:</span>
                    <span><t t-esc="props.formatCurrency(netAmount)"/></span>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px;">
                    <span>VAT Amount:</span>
                    <span><t t-esc="props.formatCurrency(vatAmount)"/></span>
                </div>
  <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 12px; margin-bottom: 10px;">
                    <span>TOTAL AMOUNT DUE:</span>
                    <span><t t-esc="props.formatCurrency(props.data.taxTotals.order_total)"/></span>
                </div>

                <div style="border-top: 0.5px solid #000; margin: 7px 0; height: 0; transform: scaleY(0.5);"></div>



                <!-- Payment Lines -->
                <div t-foreach="props.data.paymentlines" t-as="line" t-key="line_index">
                    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 3px;">
                        <span><t t-esc="line.name"/>:</span>
                        <span><t t-esc="props.formatCurrency(line.amount)"/></span>
                    </div>
                </div>

                <div t-if="props.data.show_change" style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 3px;">
                    <span>Change:</span>
                    <span><t t-esc="props.formatCurrency(props.data.order_change)"/></span>
                </div>

                <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 12px; margin-bottom: 10px;">
                    <span>TOTAL PAID:</span>
                    <span><t t-esc="props.formatCurrency(props.data.taxTotals.order_total)"/></span>
                </div>

                <div style="border-top: 0.5px solid #000; margin: 7px 0; height: 0; transform: scaleY(0.5);"></div>

                <!-- VAT Breakdown -->
                <div style="font-size: 12px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                        <span>VATable Sales:</span>
                        <span><t t-esc="props.formatCurrency(netAmount)"/></span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                        <span>VAT Amount:</span>
                        <span><t t-esc="props.formatCurrency(vatAmount)"/></span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 3px;">
                        <span>VAT Exempt Sale:</span>
                        <span>0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>Zero-Rated Sale:</span>
                        <span>0.00</span>
                    </div>
                </div>

                <!-- Footer Information -->
                <div style="font-size: 10px; text-align: center; margin-top: 15px;">
                    <div>Guest Name:</div>
                    <div>Signature:</div>
                    <div style="margin-top: 10px;">Acknowledgement Number:</div>
                    <div>TIN:</div>
                    <div>POS Registration No.:</div>
                    <div>PTU No.:</div>
                    <br/>s
                    <div>Digima Web Solutions Inc. </div>
                    <div>967, Tres Hermanas Building,</div>
                    <div>Quezon City, 1104 Metro Manila</div>
                    <div>VAT REG TIN: 000-000-000-00000</div>
                    <div>Acc. No. 11111111111111111111</div>
                    <div>Date/Time issued: <t t-esc="props.data.date"/></div>
                    <div>PTU No.:</div>
                    <div>Date Issued:</div>
                </div>

                <div style="border-top: 1px dashed #000; margin: 15px 0;"></div>

                <!-- Sales Invoice Footer -->
                <div style="font-weight: bold; text-align: center; font-size: 12px;">
                    THIS SERVES AS YOUR SALES INVOICE
                </div>
            </div>
        </xpath>
    </t>
    
</templates>